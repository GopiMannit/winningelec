<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
        rel="stylesheet">

    <title>BJP Dashboard Page</title>


    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

    <link rel="stylesheet" href="assets/css/templatemo-hexashop.css">

    <link rel="stylesheet" href="assets/css/owl-carousel.css">

    <link rel="stylesheet" href="assets/css/lightbox.css">

    <link rel="stylesheet" href="assets/css/style.css">


</head>

<body>

    <!-- ***** Preloader Start ***** -->
    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <!-- ***** Preloader End ***** -->


    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            <img src="assets/images/logo.jpeg" alt="">
                            <h4 style="color:#f26522">Winning Elections</h4>
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <!-- <ul class="nav">
                            <li class="scroll-to-section"><a href="#top" class="active">Home</a></li>
                            <li class="scroll-to-section"><a href="#men">Men's</a></li>
                            <li class="scroll-to-section"><a href="#women">Women's</a></li>
                            <li class="scroll-to-section"><a href="#kids">Kid's</a></li>
                            <li class="submenu">
                                <a href="javascript:;">Pages</a>
                                <ul>
                                    <li><a href="about.html">About Us</a></li>
                                    <li><a href="products.html">Products</a></li>
                                    <li><a href="single-product.html">Single Product</a></li>
                                    <li><a href="contact.html">Contact Us</a></li>
                                </ul>
                            </li>
                            <li class="submenu">
                                <a href="javascript:;">Features</a>
                                <ul>
                                    <li><a href="#">Features Page 1</a></li>
                                    <li><a href="#">Features Page 2</a></li>
                                    <li><a href="#">Features Page 3</a></li>
                                    <li><a rel="nofollow" href="https://templatemo.com/page/4" target="_blank">Template Page 4</a></li>
                                </ul>
                            </li>
                            <li class="scroll-to-section"><a href="#explore">Explore</a></li>
                        </ul>         -->
                        <!-- <a class='menu-trigger'>
                            <span>Menu</span>
                        </a> -->
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <!-- ***** Main Banner Area Start ***** -->
    <div class="main-banner" id="top">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6" style="border: 3px solid #f26522; border-radius: 10px;">
                    <div class="left-content">
                        <div class="thumb">
                            <div class="main-border-button">
                                <div class="dropdown-container">
                                    <!-- Dropdown 1 -->
                                    <select class="dropdown" id="districtDropdown">
                                        <option value="" disabled selected>Choose District</option>
                                    </select>

                                    <!-- Dropdown 2 -->
                                    <select class="dropdown" id="assemblyDropdown">
                                        <option value="" disabled selected>Choose Assembly</option>
                                    </select>

                                    <br> <!-- Line break between the sets of dropdowns -->

                                    <!-- Dropdown 3 -->
                                    <select class="dropdown" id="zoneDropdown">
                                        <option value="" disabled selected>Choose Zone</option>
                                    </select>

                                    <!-- Dropdown 4 -->
                                    <select class="dropdown" id="wardDropdown">
                                        <option value="" disabled selected>Choose Ward</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <button class="button-1" onclick="triggerApiCall()">Search</button> -->
                    <div class="custom-container">
                        <!-- <input type="text" class="form-control custom-input" id="imageUrlInput"
                                placeholder="Generated Image URL" readonly> -->
                        <button class="button" onclick="triggerApiCall()">Open</button>
                    </div>
                    <!-- <div class="custom-container">
                            <button class="button-1" onclick="triggerApiCall()">Open</button>
                        </div> -->
                </div>

                <div class="col-lg-6" style="border: 3px solid #f26522; border-radius: 10px;">
                    <div class="left-content">
                        <div class="thumb">
                            <img src="assets/images/tamilnadu-1.png" alt="Default image" id="defaultImage">
                            <div id="iframeContainer"></div>
                            <div id="imageContainer"></div>

                            <!-- <img src="assets/images/right-image-1.jpeg" alt=""> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery -->
    <script src="assets/js/jquery-2.1.0.min.js"></script>

    <!-- Bootstrap -->
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Plugins -->
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/accordions.js"></script>
    <script src="assets/js/datepicker.js"></script>
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/imgfix.min.js"></script>
    <script src="assets/js/slick.js"></script>
    <script src="assets/js/lightbox.js"></script>
    <script src="assets/js/isotope.js"></script>
    <script src="assets/data/zone.js"></script>
    <script src="assets/data/ward.js"></script>
    <script src="assets/data/district.js"></script>

    <!-- Global Init -->
    <script src="assets/js/custom.js"></script>

    <script>

        function triggerApiCall() {
            var selectedDistrict = document.getElementById('districtDropdown').value;
            var selectedAssembly = document.getElementById('assemblyDropdown').value;
            var apiUrl = 'https://broadcastmessage.mannit.co/mannit/eSearch?f1_op=eq&filtercount=2&f1_field=district_S&domain=WARD&subdomain=WARD&f1_value=' + selectedDistrict + '&f2_field=assembly_S&f2_op=eq&f2_value=' + selectedAssembly;

            // Log the API URL to the console
            console.log("API URL:", apiUrl);
            var iframeElement = document.createElement('iframe');
            var imageElement = document.createElement('img');
            // Example: Make a GET request using Fetch API
            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Log the entire response for debugging purposes
                    console.log("API Response:", data);

                    // Extract the URL from the "source" array
                    if (data.source && Array.isArray(data.source) && data.source.length > 0) {
                        const sourceObject = JSON.parse(data.source[0]);
                        const imageUrl = sourceObject.url;
                        //imageElement.innerHTML = '';
                        //iframeElement.innerHTML = '';
                       

                        // Log the extracted URL
                        console.log("Image URL:", imageUrl);

                        // Check if the URL contains "google.com/spreadsheets" to determine the type
                        if (imageUrl.includes("google.com/spreadsheets")) {
                            // Handle iframe
                            
                             iframeElement.innerHTML = '';
                             iframeElement = document.getElementById('iframeContainer');
                            if (iframeElement) {
                                iframeElement.innerHTML = `<iframe src="${imageUrl}" width="100%" height="400px"></iframe>`;
                                const defaultImage = document.getElementById("defaultImage");
                                imageElement.innerHTML = '';
                                if (defaultImage) {
                                    defaultImage.style.display = "none";
                                }
                            } else {
                                console.error("Image container element not found");
                            }
                        } else {
                            // Handle image
                             imageElement.innerHTML = '';
                            
                             imageElement = document.getElementById('imageContainer');
                            if (imageElement) {
                                imageElement.innerHTML = `<img src="${imageUrl}" alt="Generated Image">`;
                                const defaultImage = document.getElementById("defaultImage");
                                iframeElement.innerHTML = '';
                                if (defaultImage) {
                                    defaultImage.style.display = "none";
                                }
                            } else {
                                console.error("Image container element not found");
                            }
                        }
                    } else {
                        console.error("Invalid or missing 'source' data in the API response");
                    }
                })
                .catch(error => console.error("API Error:", error));
        }

        document.addEventListener('DOMContentLoaded', function () {
            // Get the dropdown elements
            var zoneDropdown = document.getElementById('zoneDropdown');
            var wardDropdown = document.getElementById('wardDropdown');
            var districtDropdown = document.getElementById('districtDropdown');
            var assemblyDropdown = document.getElementById('assemblyDropdown');

            // Populate the Zone dropdown with options
            zoneValues.forEach(function (value) {
                var option = document.createElement('option');
                option.value = value;
                option.text = value;
                zoneDropdown.appendChild(option);
            });

            // Populate the Ward dropdown with options
            wardValues.forEach(function (value) {
                var option = document.createElement('option');
                option.value = value;
                option.text = value;
                wardDropdown.appendChild(option);
            });

            // Populate the District dropdown with options
            for (var district in districtValues) {
                var option = document.createElement('option');
                option.value = district;
                option.text = district;
                districtDropdown.appendChild(option);
            }

            // Add an event listener to the district dropdown
            districtDropdown.addEventListener('change', function () {
                // Clear existing options in the assembly dropdown
                assemblyDropdown.innerHTML = "<option value='' disabled selected>Choose Assembly</option>";

                // Get the selected district
                var selectedDistrict = districtDropdown.value;

                // Populate the assembly dropdown based on the selected district
                if (districtValues[selectedDistrict]) {
                    districtValues[selectedDistrict].forEach(function (value) {
                        var option = document.createElement('option');
                        option.value = value;
                        option.text = value;
                        assemblyDropdown.appendChild(option);
                    });
                }
            });
        });
    </script>


</body>

</html>